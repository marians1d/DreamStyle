"use strict";(self.webpackChunkCustom_Furniture=self.webpackChunkCustom_Furniture||[]).push([[960],{960:(Ze,h,l)=>{l.r(h),l.d(h,{OrdersModule:()=>xe});var m=l(9808),p=l(9560),x=l(9390),e=l(1223),g=l(8386);let Z=(()=>{class r{constructor(t,n){this.userService=t,this.router=n}canActivate(t,n){var i;const s=t.paramMap.get("orderId");return!!(null===(i=this.userService.user)||void 0===i?void 0:i.orders.some(c=>c._id===s))||this.router.createUrlTree([`/orders/${s}`])}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(g.K),e.LFG(p.F0))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var u=l(6854),_=l(2313),d=l(2382);function b(r,o){1&r&&(e.TgZ(0,"p",28),e._uU(1," Order's Name is required! "),e.qZA())}function O(r,o){1&r&&(e.TgZ(0,"p",28),e._uU(1," Order's Name is not valid! "),e.qZA())}function T(r,o){if(1&r&&(e.ynx(0),e.YNc(1,b,2,0,"p",27),e.YNc(2,O,2,0,"p",27),e.BQk()),2&r){e.oxw();const t=e.MAs(9);e.xp6(1),e.Q6J("ngIf",null==t.errors?null:t.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.errors?null:t.errors.minlength)}}function C(r,o){1&r&&(e.TgZ(0,"p",28),e._uU(1," Location is required! "),e.qZA())}function y(r,o){if(1&r&&(e.ynx(0),e.YNc(1,C,2,0,"p",27),e.BQk()),2&r){e.oxw();const t=e.MAs(15);e.xp6(1),e.Q6J("ngIf",null==t.errors?null:t.errors.required)}}function M(r,o){1&r&&(e.ynx(0),e.TgZ(1,"p",28),e._uU(2," Invalid status is required! "),e.qZA(),e.BQk())}function A(r,o){1&r&&(e.TgZ(0,"p",28),e._uU(1," Description is required! "),e.qZA())}function I(r,o){1&r&&(e.TgZ(0,"p",28),e._uU(1," Description must be at least 10 characters long "),e.qZA())}function q(r,o){if(1&r&&(e.ynx(0),e.YNc(1,A,2,0,"p",27),e.YNc(2,I,2,0,"p",27),e.BQk()),2&r){e.oxw();const t=e.MAs(39);e.xp6(1),e.Q6J("ngIf",null==t.errors?null:t.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.errors?null:t.errors.minlength)}}let N=(()=>{class r{constructor(t,n,i,s){this.orderService=t,this.router=n,this.userService=i,this.title=s,this.isPublic=!0,this.initialStatus="public"}ngOnInit(){this.title.setTitle("Create an Order")}submit(t){t.invalid||this.orderService.createOrder$({orderName:t.value.orderName,description:t.value.description,address:t.value.address,visibility:t.value.visibility,orderImage:this.orderImage}).subscribe({next:i=>{var s;null===(s=this.userService.user)||void 0===s||s.orders.push(i),this.router.navigate([`/orders/${i._id}`])},error:i=>{console.error(i)}})}orderImageChange(t){this.orderImage=t.target.files[0]}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(u.p),e.Y36(p.F0),e.Y36(g.K),e.Y36(_.Dx))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-new-order"]],decls:47,vars:15,consts:[[1,"container","w-50","p-5","my-5","border","rounded-3"],[3,"ngSubmit"],["form","ngForm"],[1,"mb-3","mt-3"],["for","orderName",1,"form-label"],["ngModel","","type","text","id","orderName","placeholder","Enter your order's name","name","orderName","required","","minlength","4",1,"form-control"],["nameInput","ngModel"],[4,"ngIf"],[1,"mb-3"],["for","location",1,"form-label"],["ngModel","","type","text","id","location","placeholder","Enter location","name","address","required","","minlength","5",1,"form-control"],["locationInput","ngModel"],[1,"form-label"],[1,"container","border","rounded-3","mb-3"],[1,"form-check","py-1"],["ngModel","","type","radio","id","radio1","name","visibility","pattern","public|private",1,"form-check-input",3,"ngModel","value","ngModelChange"],["statusInput","ngModel"],["for","radio1",1,"form-check-label"],[1,"small","text-muted"],["ngModel","","type","radio","id","radio2","name","visibility","pattern","public|private",1,"form-check-input",3,"ngModel","value","ngModelChange"],["for","radio2",1,"form-check-label"],["for","description",1,"form-label"],["ngModel","","rows","5","id","description","name","description","placeholder","I want a kitchen whit white cabinets","required","","maxlength","300","minlength","10",1,"form-control"],["descriptionInput","ngModel"],["for","formFile",1,"form-label"],["accept","image/*","type","file","id","formFile",1,"form-control",3,"change"],["type","submit",1,"btn","btn-primary","my-2",3,"disabled"],["class","error",4,"ngIf"],[1,"error"]],template:function(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"div",0)(1,"form",1,2),e.NdJ("ngSubmit",function(){e.CHM(i);const c=e.MAs(2);return n.submit(c)}),e.TgZ(3,"h2"),e._uU(4,"Place an Order"),e.qZA(),e.TgZ(5,"div",3)(6,"label",4),e._uU(7,"Order Name:"),e.qZA(),e._UZ(8,"input",5,6),e.qZA(),e.YNc(10,T,3,2,"ng-container",7),e.TgZ(11,"div",8)(12,"label",9),e._uU(13,"Order location:"),e.qZA(),e._UZ(14,"input",10,11),e.qZA(),e.YNc(16,y,2,1,"ng-container",7),e.TgZ(17,"label",12),e._uU(18,"Order status:"),e.qZA(),e.TgZ(19,"div",13)(20,"div",14)(21,"input",15,16),e.NdJ("ngModelChange",function(c){return n.initialStatus=c}),e.qZA(),e.TgZ(23,"label",17),e._uU(24,"Public "),e.TgZ(25,"span",18),e._uU(26,"(Anyone on the internet can see your order)"),e.qZA()()(),e.TgZ(27,"div",14)(28,"input",19,16),e.NdJ("ngModelChange",function(c){return n.initialStatus=c}),e.qZA(),e.TgZ(30,"label",20),e._uU(31,"Private "),e.TgZ(32,"span",18),e._uU(33,"(Only staff can see your order)"),e.qZA()()(),e.YNc(34,M,3,0,"ng-container",7),e.qZA(),e.TgZ(35,"div",8)(36,"label",21),e._uU(37,"Description:"),e.qZA(),e._UZ(38,"textarea",22,23),e.qZA(),e.YNc(40,q,3,2,"ng-container",7),e.TgZ(41,"div",8)(42,"label",24),e._uU(43,"Order Image: "),e.qZA(),e.TgZ(44,"input",25),e.NdJ("change",function(c){return n.orderImageChange(c)}),e.qZA()(),e.TgZ(45,"button",26),e._uU(46,"Submit"),e.qZA()()()}if(2&t){const i=e.MAs(2),s=e.MAs(9),c=e.MAs(15),a=e.MAs(22),v=e.MAs(39);e.xp6(8),e.ekj("input-error",s.touched&&s.invalid),e.xp6(2),e.Q6J("ngIf",s.touched),e.xp6(4),e.ekj("input-error",c.touched&&c.invalid),e.xp6(2),e.Q6J("ngIf",c.touched),e.xp6(5),e.Q6J("ngModel",n.initialStatus)("value","public"),e.xp6(7),e.Q6J("ngModel",n.initialStatus)("value","private"),e.xp6(6),e.Q6J("ngIf",a.touched&&a.invalid),e.xp6(4),e.ekj("input-error",v.touched&&v.invalid),e.xp6(2),e.Q6J("ngIf",v.touched),e.xp6(5),e.Q6J("disabled",i.invalid)}},directives:[d._Y,d.JL,d.F,d.Fj,d.JJ,d.On,d.Q7,d.wO,m.O5,d._,d.c5,d.nD],styles:[".error[_ngcontent-%COMP%]{color:red}.input-error[_ngcontent-%COMP%]{border-color:red}"]}),r})();var w=l(5338);let J=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-comment-list-item"]],inputs:{comment:"comment"},decls:8,vars:2,consts:[[1,"card","mx-auto","my-4","w-75"],[1,"row","g-0"],[1,"col-md"],[1,"card-body"],[1,"card-title","mb-3","pb-2","border-bottom"],[1,"card-text"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),e._uU(5),e.qZA(),e.TgZ(6,"p",5),e._uU(7),e.qZA()()()()()),2&t&&(e.xp6(5),e.Oqu(n.comment.userId.username),e.xp6(2),e.Oqu(n.comment.text))},styles:[""]}),r})();function U(r,o){if(1&r&&(e.TgZ(0,"div"),e._UZ(1,"app-comment-list-item",2),e.qZA()),2&r){const t=o.$implicit;e.xp6(1),e.Q6J("comment",t)}}function Q(r,o){if(1&r&&(e.ynx(0),e.YNc(1,U,2,1,"div",1),e.BQk()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.comments)}}let S=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-comment-list"]],inputs:{comments:"comments"},decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"comment"]],template:function(t,n){1&t&&e.YNc(0,Q,2,1,"ng-container",0),2&t&&e.Q6J("ngIf",n.comments)},directives:[m.O5,m.sg,J],styles:[""]}),r})(),f=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-spiner"]],decls:1,vars:0,consts:[[1,"spinner-border","text-warning","spinner"]],template:function(t,n){1&t&&e._UZ(0,"div",0)},styles:[".spinner[_ngcontent-%COMP%]{display:block;margin:20px auto auto}"]}),r})();function Y(r,o){if(1&r&&(e.TgZ(0,"p"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.hij(" Mesurment Date: ",e.xi3(2,1,t.order.mesurmentDate,"dd / MM / yy"),"")}}const D=function(r){return["/orders",r,"edit"]};function L(r,o){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",16),e._uU(2,"Edit"),e.qZA(),e.TgZ(3,"button",17),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).delete()}),e._uU(4,"Delete"),e.qZA(),e.BQk()}if(2&r){const t=e.oxw(3);e.xp6(1),e.Q6J("routerLink",e.VKq(1,D,t.order._id))}}function F(r,o){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",18),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return i.isProviding=!i.isProviding}),e._uU(2,"Set Appointment"),e.qZA(),e.BQk()}}function k(r,o){if(1&r){const t=e.EpF();e.TgZ(0,"form",19,20),e.NdJ("ngSubmit",function(){e.CHM(t);const i=e.MAs(1);return e.oxw(3).provide(i)}),e.TgZ(2,"div",21)(3,"label",22),e._uU(4,"Mesurment Day"),e.qZA(),e._UZ(5,"input",23,24),e.qZA(),e.TgZ(7,"button",25),e._uU(8,"Submit"),e.qZA()()}}function E(r,o){if(1&r&&(e.TgZ(0,"div",14),e.YNc(1,L,5,3,"ng-container",1),e.YNc(2,F,3,0,"ng-container",1),e.YNc(3,k,9,0,"form",15),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.isOwner),e.xp6(1),e.Q6J("ngIf",!t.isOwner&&t.isProvider&&!t.isProviding),e.xp6(1),e.Q6J("ngIf",t.isProviding)}}function P(r,o){1&r&&(e.TgZ(0,"h2",26),e._uU(1,"Comment section"),e.qZA())}function j(r,o){if(1&r&&e._UZ(0,"app-comment-list",27),2&r){const t=e.oxw(2);e.Q6J("comments",t.order.comments)}}function B(r,o){1&r&&(e.TgZ(0,"h2",26),e._uU(1,"Be the first to post a comment"),e.qZA())}function H(r,o){if(1&r){const t=e.EpF();e.TgZ(0,"section",28)(1,"form",19,29),e.NdJ("ngSubmit",function(){e.CHM(t);const i=e.MAs(2);return e.oxw(2).comment(i)}),e.TgZ(3,"label",30),e._uU(4,"Comments:"),e.qZA(),e._UZ(5,"textarea",31,32),e.TgZ(7,"button",33),e._uU(8,"Submit"),e.qZA()()()}if(2&r){const t=e.MAs(2);e.xp6(7),e.Q6J("disabled",t.invalid)}}function $(r,o){if(1&r&&(e.TgZ(0,"div",2)(1,"section",3)(2,"div",4),e._UZ(3,"img",5),e.TgZ(4,"div",6)(5,"h2",7),e._uU(6),e.qZA(),e.TgZ(7,"p"),e._uU(8),e.qZA(),e.YNc(9,Y,3,4,"p",1),e.TgZ(10,"p",8),e._uU(11),e.qZA(),e.YNc(12,E,4,3,"div",9),e.qZA()()(),e.TgZ(13,"section",10),e.YNc(14,P,2,0,"h2",11),e.YNc(15,j,1,1,"app-comment-list",12),e.YNc(16,B,2,0,"h2",11),e.qZA(),e.YNc(17,H,9,1,"section",13),e.qZA()),2&r){const t=e.oxw();e.xp6(3),e.Q6J("src",t.order.orderImageUrl?t.order.orderImageUrl:"/assets/sketching1.png",e.LSH),e.xp6(3),e.Oqu(t.order.orderName),e.xp6(2),e.hij(" Location: ",t.order.address,""),e.xp6(1),e.Q6J("ngIf",t.order.mesurmentDate&&(t.isOwner||t.isProvider)),e.xp6(2),e.hij(" Description: ",t.order.description," "),e.xp6(1),e.Q6J("ngIf",t.isLogged),e.xp6(2),e.Q6J("ngIf",0!=t.order.comments.length),e.xp6(1),e.Q6J("ngIf",0!=t.order.comments.length),e.xp6(1),e.Q6J("ngIf",0==t.order.comments.length),e.xp6(1),e.Q6J("ngIf",t.isLogged)}}function X(r,o){1&r&&e._UZ(0,"app-spiner")}let z=(()=>{class r{constructor(t,n,i,s,c,a){this.orderService=t,this.activatedRoute=n,this.userService=i,this.commentService=s,this.router=c,this.title=a,this.isProviding=!1}get user(){return this.userService.user}get isLogged(){return this.userService.isLogged}get isOwner(){return!!this.user&&this.user._id==this.order.userId._id}get isProvider(){var t;return!!this.user&&"provider"===(null===(t=this.user)||void 0===t?void 0:t.status)}ngOnInit(){this.orderService.getOrder$(this.activatedRoute.snapshot.params.orderId).subscribe(n=>{this.order=n,this.title.setTitle(n.orderName)})}comment(t){t.invalid||(this.commentService.createComment$({commentText:t.value.comment},this.order._id).subscribe(i=>{i.userId=this.user,this.order.comments.push(i)}),t.reset())}delete(){this.orderService.deleteOrder$(this.order._id).subscribe(()=>{var t,n;(null===(t=this.user)||void 0===t?void 0:t.orders)&&(this.user.orders=null===(n=this.user)||void 0===n?void 0:n.orders.filter(i=>i._id!=this.order._id)),this.router.navigate(["/"])})}provide(t){const n=new Date(t.value.mesurmentDate);this.orderService.provide$({mesurmentDate:n},this.order._id).subscribe(()=>{this.order.mesurmentDate=n,this.isProviding=!1})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(u.p),e.Y36(p.gz),e.Y36(g.K),e.Y36(w.O),e.Y36(p.F0),e.Y36(_.Dx))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-order-details"]],decls:2,vars:2,consts:[["class","container text-center text-lg-start",4,"ngIf"],[4,"ngIf"],[1,"container","text-center","text-lg-start"],[1,"main","mt-5","border","rounded-3"],[1,"d-lg-flex","align-items-center","justify-content-evenly"],["alt","",1,"p-3",3,"src"],[1,""],[1,"py-1","border-bottom","w-100"],[1,"my-4"],["class","actions text-center",4,"ngIf"],[1,"comment","container","my-5","border","rounded-3","mb-0"],["class","text-center mt-3",4,"ngIf"],[3,"comments",4,"ngIf"],["class","comment container my-5 border rounded-3 mt-0",4,"ngIf"],[1,"actions","text-center"],["class","m-4",3,"ngSubmit",4,"ngIf"],[1,"btn","btn-warning","me-4",3,"routerLink"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-warning",3,"click"],[1,"m-4",3,"ngSubmit"],["provideForm","ngForm"],[1,"mb-3","mt-3"],["for","mdate",1,"form-label"],["ngModel","","type","date","id","mdate","placeholder","Enter Mesurment Date","name","mesurmentDate",1,"form-control"],["mesurmentDate","ngModel"],[1,"btn","btn-primary","mt-3"],[1,"text-center","mt-3"],[3,"comments"],[1,"comment","container","my-5","border","rounded-3","mt-0"],["commentForm","ngForm"],["for","comment"],["ngModel","","rows","5","id","comment","name","comment","required","",1,"form-control"],["commentInput","ngModel"],[1,"btn","btn-primary","mt-3",3,"disabled"]],template:function(t,n){1&t&&(e.YNc(0,$,18,10,"div",0),e.YNc(1,X,1,0,"app-spiner",1)),2&t&&(e.Q6J("ngIf",n.order),e.xp6(1),e.Q6J("ngIf",!n.order))},directives:[m.O5,p.rH,d._Y,d.JL,d.F,d.Fj,d.JJ,d.On,S,d.Q7,f],pipes:[m.uU],styles:["img[_ngcontent-%COMP%]{height:70%;width:70%;object-fit:contain}"]}),r})();function G(r,o){if(1&r&&(e.TgZ(0,"p",29),e._uU(1),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.errorMessage," ")}}function K(r,o){1&r&&(e.TgZ(0,"p",29),e._uU(1," Order's Name is required! "),e.qZA())}function R(r,o){1&r&&(e.TgZ(0,"p",29),e._uU(1," Order's Name is not valid! "),e.qZA())}function V(r,o){if(1&r&&(e.ynx(0),e.YNc(1,K,2,0,"p",3),e.YNc(2,R,2,0,"p",3),e.BQk()),2&r){e.oxw();const t=e.MAs(10);e.xp6(1),e.Q6J("ngIf",null==t.errors?null:t.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.errors?null:t.errors.minlength)}}function W(r,o){1&r&&(e.TgZ(0,"p",29),e._uU(1," Location is required! "),e.qZA())}function ee(r,o){if(1&r&&(e.ynx(0),e.YNc(1,W,2,0,"p",3),e.BQk()),2&r){e.oxw();const t=e.MAs(16);e.xp6(1),e.Q6J("ngIf",null==t.errors?null:t.errors.required)}}function te(r,o){1&r&&(e.ynx(0),e.TgZ(1,"p",29),e._uU(2," Invalid status is required! "),e.qZA(),e.BQk())}function re(r,o){1&r&&(e.TgZ(0,"p",29),e._uU(1," Description is required! "),e.qZA())}function ne(r,o){1&r&&(e.TgZ(0,"p",29),e._uU(1," Description must be at least 10 characters long "),e.qZA())}function oe(r,o){if(1&r&&(e.ynx(0),e.YNc(1,re,2,0,"p",3),e.YNc(2,ne,2,0,"p",3),e.BQk()),2&r){e.oxw();const t=e.MAs(16),n=e.MAs(40);e.xp6(1),e.Q6J("ngIf",null==t.errors?null:t.errors.required),e.xp6(1),e.Q6J("ngIf",null==n.errors?null:n.errors.minlength)}}function ie(r,o){if(1&r){const t=e.EpF();e.TgZ(0,"div",2),e.YNc(1,G,2,1,"p",3),e.TgZ(2,"form",4,5),e.NdJ("ngSubmit",function(){e.CHM(t);const i=e.MAs(3);return e.oxw().submit(i)}),e.TgZ(4,"h2"),e._uU(5,"Edit your Order"),e.qZA(),e.TgZ(6,"div",6)(7,"label",7),e._uU(8,"Order Name:"),e.qZA(),e._UZ(9,"input",8,9),e.qZA(),e.YNc(11,V,3,2,"ng-container",1),e.TgZ(12,"div",10)(13,"label",11),e._uU(14,"Order location:"),e.qZA(),e._UZ(15,"input",12,13),e.qZA(),e.YNc(17,ee,2,1,"ng-container",1),e.TgZ(18,"label",14),e._uU(19,"Order status:"),e.qZA(),e.TgZ(20,"div",15)(21,"div",16)(22,"input",17,18),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().initialStatus=i}),e.qZA(),e.TgZ(24,"label",19),e._uU(25,"Public "),e.TgZ(26,"span",20),e._uU(27,"(Anyone on the internet can see your order)"),e.qZA()()(),e.TgZ(28,"div",16)(29,"input",21,18),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().initialStatus=i}),e.qZA(),e.TgZ(31,"label",22),e._uU(32,"Private "),e.TgZ(33,"span",20),e._uU(34,"(Only staff can see your order)"),e.qZA()()(),e.YNc(35,te,3,0,"ng-container",1),e.qZA(),e.TgZ(36,"div",10)(37,"label",23),e._uU(38,"Description:"),e.qZA(),e._UZ(39,"textarea",24,25),e.qZA(),e.YNc(41,oe,3,2,"ng-container",1),e.TgZ(42,"div",10)(43,"label",26),e._uU(44,"Chose a new order image: "),e.TgZ(45,"span",20),e._uU(46,"( Optional )"),e.qZA()(),e.TgZ(47,"input",27),e.NdJ("change",function(i){return e.CHM(t),e.oxw().orderImageChange(i)}),e.qZA()(),e.TgZ(48,"button",28),e._uU(49,"Submit"),e.qZA()()()}if(2&r){const t=e.MAs(3),n=e.MAs(10),i=e.MAs(16),s=e.MAs(23),c=e.MAs(40),a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.errorMessage),e.xp6(8),e.ekj("input-error",n.touched&&n.invalid),e.Q6J("ngModel",a.order.orderName),e.xp6(2),e.Q6J("ngIf",n.touched),e.xp6(4),e.ekj("input-error",i.touched&&i.invalid),e.Q6J("ngModel",a.order.address),e.xp6(2),e.Q6J("ngIf",i.touched),e.xp6(5),e.Q6J("ngModel",a.initialStatus)("value","public"),e.xp6(7),e.Q6J("ngModel",a.initialStatus)("value","private"),e.xp6(6),e.Q6J("ngIf",s.touched&&s.invalid),e.xp6(4),e.ekj("input-error",c.touched&&c.invalid),e.Q6J("ngModel",a.order.description),e.xp6(2),e.Q6J("ngIf",c.touched),e.xp6(7),e.Q6J("disabled",t.invalid)}}function se(r,o){1&r&&e._UZ(0,"app-spiner")}let de=(()=>{class r{constructor(t,n,i,s){var c;this.orderService=t,this.activatedRoute=n,this.router=i,this.title=s,this.errorMessage=void 0,this.initialStatus=null===(c=this.order)||void 0===c?void 0:c.visibility}ngOnInit(){this.title.setTitle("Edit"),this.orderService.getOrder$(this.activatedRoute.snapshot.params.orderId).subscribe(n=>{setTimeout(()=>{this.order=n,this.initialStatus=n.visibility})})}submit(t){this.orderService.editOrder$({orderName:t.value.orderName,description:t.value.description,address:t.value.address,visibility:t.value.visibility,orderImage:this.orderImage},this.order._id).subscribe({next:i=>{this.router.navigate([`/orders/${i._id}`])},error:i=>{this.errorMessage=i.error.message}})}orderImageChange(t){this.orderImage=t.target.files[0]}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(u.p),e.Y36(p.gz),e.Y36(p.F0),e.Y36(_.Dx))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-order-edit"]],decls:2,vars:2,consts:[["class","container w-50 p-5 my-5 border rounded-3",4,"ngIf"],[4,"ngIf"],[1,"container","w-50","p-5","my-5","border","rounded-3"],["class","error",4,"ngIf"],[3,"ngSubmit"],["form","ngForm"],[1,"mb-3","mt-3"],["for","orderName",1,"form-label"],["type","text","id","orderName","placeholder","Enter your order's name","name","orderName","required","","minlength","4",1,"form-control",3,"ngModel"],["nameInput","ngModel"],[1,"mb-3"],["for","location",1,"form-label"],["type","text","id","location","placeholder","Enter location","name","address","required","","minlength","5",1,"form-control",3,"ngModel"],["locationInput","ngModel"],[1,"form-label"],[1,"container","border","rounded-3","mb-3"],[1,"form-check","py-1"],["ngModel","","type","radio","id","radio1","name","visibility","pattern","public|private",1,"form-check-input",3,"ngModel","value","ngModelChange"],["statusInput","ngModel"],["for","radio1",1,"form-check-label"],[1,"small","text-muted"],["ngModel","","type","radio","id","radio2","name","visibility","pattern","public|private",1,"form-check-input",3,"ngModel","value","ngModelChange"],["for","radio2",1,"form-check-label"],["for","description",1,"form-label"],["rows","5","id","description","name","description","placeholder","I want a kitchen whit white cabinets","required","","maxlength","300","minlength","10",1,"form-control",3,"ngModel"],["descriptionInput","ngModel"],["for","formFile",1,"form-label"],["accept","image/*","type","file","id","formFile",1,"form-control",3,"change"],["type","submit",1,"btn","btn-primary","my-2",3,"disabled"],[1,"error"]],template:function(t,n){1&t&&(e.YNc(0,ie,50,19,"div",0),e.YNc(1,se,1,0,"app-spiner",1)),2&t&&(e.Q6J("ngIf",n.order),e.xp6(1),e.Q6J("ngIf",!n.order))},directives:[m.O5,d._Y,d.JL,d.F,d.Fj,d.Q7,d.wO,d.JJ,d.On,d._,d.c5,d.nD,f],styles:[".error[_ngcontent-%COMP%]{color:red}.input-error[_ngcontent-%COMP%]{border-color:red}"]}),r})(),ce=(()=>{class r{transform(t,n){if(t){const i=Math.floor((Number(new Date)-Number(new Date(t)))/1e3);if(i<59)return"Just now";const s={year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60,second:1};let c;for(const a in s)if(c=Math.floor(i/s[a]),c>0)return 1===c?c+" "+a+" ago":c+" "+a+"s ago"}return t}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275pipe=e.Yjl({name:"timeDiff",type:r,pure:!0}),r})();const ae=function(r){return["/orders",r]};let le=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-order-list-item"]],inputs:{order:"order"},decls:18,vars:11,consts:[[1,"card","mx-auto","my-4","w-75",3,"routerLink"],[1,"row","g-0"],[1,"col-md-4"],["alt","Order image",1,"img-fluid","rounded-start",3,"src"],[1,"col-md-8"],[1,"card-body"],[1,"card-title","fs-2","mb-3","pb-2","border-bottom"],[1,"card-text","fs-4"],[1,"text-muted","text-end"],[1,"card-text","fs-6"],[1,"card-text","text-end","fs-6"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.qZA(),e.TgZ(4,"div",4)(5,"div",5)(6,"p",6),e._uU(7),e.qZA(),e.TgZ(8,"p",7)(9,"small",8),e._uU(10),e.qZA()(),e.TgZ(11,"p",7),e._uU(12),e.qZA(),e.TgZ(13,"p",9),e._uU(14),e.qZA(),e.TgZ(15,"p",10),e._uU(16),e.ALo(17,"timeDiff"),e.qZA()()()()()),2&t&&(e.Q6J("routerLink",e.VKq(9,ae,n.order._id)),e.xp6(3),e.Q6J("src",n.order.orderImageUrl?n.order.orderImageUrl:"/assets/sketching1.png",e.LSH),e.xp6(4),e.Oqu(n.order.orderName),e.xp6(3),e.hij("from: ",n.order.userId.username,""),e.xp6(2),e.hij("Location: ",n.order.address,""),e.xp6(2),e.Oqu(n.order.description),e.xp6(2),e.hij("Posted: ",e.lcZ(17,7,n.order.created_at),""))},directives:[p.rH],pipes:[ce],styles:[".card[_ngcontent-%COMP%]:hover{transition:box-shadow .3s;box-shadow:10px 10px 5px gray;cursor:pointer}img[_ngcontent-%COMP%]{width:400px;height:300px;object-fit:contain}"]}),r})();function me(r,o){if(1&r&&(e.TgZ(0,"div"),e._UZ(1,"app-order-list-item",3),e.qZA()),2&r){const t=o.$implicit;e.xp6(1),e.Q6J("order",t)}}function pe(r,o){if(1&r&&(e.ynx(0),e.YNc(1,me,2,1,"div",2),e.BQk()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.orderList)}}function ue(r,o){1&r&&e._UZ(0,"app-spiner")}function _e(r,o){1&r&&(e.TgZ(0,"h3",4),e._uU(1,"Be the first to post a order"),e.qZA())}const fe=p.Bz.forChild([{path:"",pathMatch:"full",component:(()=>{class r{constructor(t,n){this.orderService=t,this.title=n}ngOnInit(){this.title.setTitle("Orders"),this.ordersSubscription=this.orderService.getOrders$().subscribe(t=>{this.orderList=t})}ngOnDestroy(){var t;null===(t=this.ordersSubscription)||void 0===t||t.unsubscribe()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(u.p),e.Y36(_.Dx))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-order-list"]],decls:3,vars:3,consts:[[4,"ngIf"],["class","text-center mt-5",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"order"],[1,"text-center","mt-5"]],template:function(t,n){1&t&&(e.YNc(0,pe,2,1,"ng-container",0),e.YNc(1,ue,1,0,"app-spiner",0),e.YNc(2,_e,2,0,"h3",1)),2&t&&(e.Q6J("ngIf",n.orderList&&n.orderList.length>0),e.xp6(1),e.Q6J("ngIf",!n.orderList),e.xp6(1),e.Q6J("ngIf",n.orderList&&n.orderList.length<=0))},directives:[m.O5,m.sg,le,f],styles:[".spinner[_ngcontent-%COMP%]{display:block;margin:20px auto auto}"]}),r})()},{path:"new",canActivate:[x.j],component:N},{path:":orderId",component:z},{path:":orderId/edit",canActivate:[Z],component:de}]);let ve=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[m.ez]]}),r})(),he=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[m.ez]]}),r})(),xe=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[m.ez,fe,d.u5,ve,he]]}),r})()}}]);